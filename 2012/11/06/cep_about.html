<!doctype html>
<html class="no-js" lang="en">
	<head>
		<meta name="uyan_auth" content="05e9c08001" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>心内求法</title>
		<meta name="description" content="">
		<meta name="author" content="Holbrook">

		<link rel="stylesheet" href="http://holbrook.github.io/theme/css/foundation.css" />
		<link rel="stylesheet" href="http://holbrook.github.io/theme/css/pygment/monokai.css" />
		<link rel="stylesheet" href="http://holbrook.github.io/theme/css/custom.css" />


		<script src="http://holbrook.github.io/theme/js/modernizr.js"></script>

		<!-- Feeds -->
		<link href="http://holbrook.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="心内求法 Atom Feed" />


		<!-- mathjax config similar to math.stackexchange -->
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			jax: ["input/TeX", "output/HTML-CSS"],
			tex2jax: {
				inlineMath: [ ['$', '$'] ],
				displayMath: [ ['$$', '$$']],
				processEscapes: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
			},
			messageStyle: "none",
			"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
		});
		</script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<!-- 百度统计 -->
		<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "https://hm.baidu.com/hm.js?16d951e9b49ded5f2e821a0e61d77797";
		  var s = document.getElementsByTagName("script")[0];
		  s.parentNode.insertBefore(hm, s);
		})();
		</script>
	</head>
	<body>
		<div class="off-canvas-wrap">
			<div class="inner-wrap">
				<!-- mobile top bar to activate nav -->
				<nav class="tab-bar show-for-small">
					<section class="left-small">
						<a class="left-off-canvas-toggle menu-icon" >
							<span class="fa-stack">
                    			<i class="fa fa-circle fa-stack-2x"></i>
                    			<i class="fa fa-bank fa-stack-1x fa-inverse" style="color: #eee"></i>
                			</span>
            			</a>
					</section>

					<section class="middle tab-bar-section">
						<h1 class="title">心内求法</h1>
					</section>
				</nav>

				<!-- mobile side bar nav -->
				<aside class="left-off-canvas-menu">
					<ul class="off-canvas-list">
						<li><a href="http://holbrook.github.io">Home</a></li>
						<li><label>Categories</label></li>
							<li class="active"><a href="http://holbrook.github.io/category/bing-fa-xi-tong.html">并发系统</a></li>
							<li ><a href="http://holbrook.github.io/category/du-shu-bi-ji.html">读书笔记</a></li>
							<li ><a href="http://holbrook.github.io/category/ji-xian-xie-zuo.html">极限写作</a></li>
							<li ><a href="http://holbrook.github.io/category/liang-hua-jiao-yi.html">量化交易</a></li>
							<li ><a href="http://holbrook.github.io/category/ruan-jian-kai-fa.html">软件开发</a></li>
							<li ><a href="http://holbrook.github.io/category/shu-ju-ke-xue.html">数据科学</a></li>
							<li ><a href="http://holbrook.github.io/category/tou-zi-fen-xi.html">投资分析</a></li>

						<li><label>Places</label></li>
							<li><a href="http://getpelican.com/">Pelican</a></li>
							<li><a href="http://python.org/">Python.org</a></li>
							<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
							<li><a href="#">You can modify those links in your config file</a></li>


						<li><label>Monthly Archives</label></li>
									<li><a href="/posts/2017/02/">二月 2017 (1)</a></li>
									<li><a href="/posts/2015/05/">五月 2015 (1)</a></li>
									<li><a href="/posts/2014/02/">二月 2014 (4)</a></li>
									<li><a href="/posts/2014/01/">一月 2014 (9)</a></li>
									<li><a href="/posts/2013/12/">十二月 2013 (10)</a></li>
									<li><a href="/posts/2013/09/">九月 2013 (1)</a></li>
									<li><a href="/posts/2013/08/">八月 2013 (2)</a></li>
									<li><a href="/posts/2013/07/">七月 2013 (7)</a></li>
									<li><a href="/posts/2013/06/">六月 2013 (4)</a></li>
									<li><a href="/posts/2013/05/">五月 2013 (6)</a></li>
									<li><a href="/posts/2013/01/">一月 2013 (2)</a></li>
									<li><a href="/posts/2012/12/">十二月 2012 (4)</a></li>
									<li><a href="/posts/2012/11/">十一月 2012 (3)</a></li>
									<li><a href="/posts/2012/10/">十月 2012 (2)</a></li>
									<li><a href="/posts/2012/04/">四月 2012 (1)</a></li>
									<li><a href="/posts/2012/03/">三月 2012 (1)</a></li>
									<li><a href="/posts/2012/02/">二月 2012 (2)</a></li>
									<li><a href="/posts/2010/12/">十二月 2010 (1)</a></li>

						<li><label>Links</label></li>
							<li><a href="#">Another social link</a></li>
							<li><a href="#">You can add links in your config file</a></li>
					</ul>
				</aside>

				<!-- top bar nav -->
				<nav class="top-bar hide-for-small-only" data-topbar>
					<ul class="title-area">
						<li class="name">
							<h1><a href="http://holbrook.github.io/">心内求法</a></h1>
						</li>
					</ul>

					<section class="top-bar-section">
						<ul class="left">
								<li class="active"><a href="http://holbrook.github.io/category/bing-fa-xi-tong.html">并发系统</a></li>
								<li ><a href="http://holbrook.github.io/category/du-shu-bi-ji.html">读书笔记</a></li>
								<li ><a href="http://holbrook.github.io/category/ji-xian-xie-zuo.html">极限写作</a></li>
								<li ><a href="http://holbrook.github.io/category/liang-hua-jiao-yi.html">量化交易</a></li>
								<li ><a href="http://holbrook.github.io/category/ruan-jian-kai-fa.html">软件开发</a></li>
								<li ><a href="http://holbrook.github.io/category/shu-ju-ke-xue.html">数据科学</a></li>
								<li ><a href="http://holbrook.github.io/category/tou-zi-fen-xi.html">投资分析</a></li>
						</ul>
					</section>
				</nav>

				<!-- Main Page Content and Sidebar -->
				<section class="main-section">
					<div class="row">
						<!-- Main Content -->
						<div class="medium-9 small-12 columns" role="content">
<article>
	<h2>CEP：鱼与熊掌可以兼得</h2>
	<h1>从事件驱动编程（Event-driven Programming)开始</h1>
<p>如果你写过GUI程序，对事件处理一定不陌生。事实上，事件驱动编程已经成为一种设计模式。大多数的GUI库都会采用这一模式。</p>
<p>简单的说，事件驱动模式包括三个参与者：事件产生者，事件分发器和事件处理器。</p>
<ul>
<li>事件产生者（Events Generator）</li>
</ul>
<p>决定是否需要产生事件。比如，GUI上的每个组件都是一个事件产生者，可以根据用户操作产生鼠标事件或者键盘事件。</p>
<ul>
<li>事件分发器（Events Dispatcher）</li>
</ul>
<p>收集所有事件产生者发出的事件放入事件队列(Events Queue)，
并根据事件的类型将事件分发给已经注册的事件处理器。事件分发器通常由GUI框架实现。</p>
<ul>
<li>事件处理器（Events Handler)</li>
</ul>
<p>根据接收到的事件进行处理，需要GUI框架的使用者自行编写。</p>
<p>事件驱动编程的核心价值在于：程序的执行流程不是预先定义好的，而是由程序的使用者决定的。这将极大增强程序的交互性。</p>
<p>就好像DVD与RPG游戏的区别：前者的剧情是设定好的，你只能进行开始、暂停、快进、回退等有限的交互；后者可以决定主角的行为从而影响故事的结局。</p>
<h1>事件驱动业务（Event-driven Business)</h1>
<p>代码的世界不可能是现实世界的完整镜像，但一定是对现实世界的某种抽象，这种抽象能够简化代码世界中对问题的分析和处理。
同时，这种抽象还可以反向映射到现实世界，为我们解决现实问题提供思路。</p>
<p>现代企业生存的外部环境处于剧烈的变化之中，“敏捷企业”已经成为生存之道，而事件驱动业务是敏捷企业的一个基本要求。</p>
<p>事件驱动业务（Event-driven Business)，是在 连续
的业务过程中进行决策的一种业务管理方式，即根据不同时点上出现的一系列事件触发相关的任务，并调度可用的资源执行任务。
如果说事件驱动编程能够为软件带来更灵活的交互性和强大的功能，那么企业中的事件驱动业务能够大幅度提高业务的效率和灵活性。</p>
<p>事件驱动业务依托于比较成熟的信息化建设。各个业务应用系统在产生连续不断的数据流的同时，根据定义好的条件产生一些“业务事件”，按照策略对这些业务事件进行分析处理，触发新的业务事件或者业务流程，即实现了业务的事件驱动。</p>
<p>从上面的描述可以看出，事件驱动业务要求能够快速（毫秒级）、不间断的处理连续、海量的数据，具备灵活的规则或策略设置，从而具备迅速识别、捕获、响应实时业务数据的能力。
而传统的企业IT架构通常采用：</p>
<ul>
<li>在业务应用系统中处理业务操作</li>
<li>遵循固定的业务流程（Business
    Process）处理跨系统事务，并且这些流程很少变化</li>
<li>基于数据仓库进行海量数据的存储及事后分析</li>
</ul>
<p>这种IT架构远远达不到事件驱动业务的要求。</p>
<p>事件驱动业务能够应用的业务领域很多，凡是需要快速处理连续性数据、需要能够灵活制定策略的业务，都可以采用事件驱动的业务模式。如证券行业常见的风险分析预警（事前及事中风控）、投资决策（程序化交易）、经纪人绩效计算等。</p>
<h1>业务事件处理的几个层次</h1>
<p>其实在传统的IT架构中，我们已经实现了业务事件的处理。比如在传统的业务应用系统中，我们通常将业务数据存储在数据库中，通过应用系统的操作界面由人工发现和处理业务事件。</p>
<p>这样的处理方式存在两个不足，一是速度慢，二是对于复杂的情况只靠人脑难以处理。于是有了两个技术方向：</p>
<ul>
<li>消息队列（MQ）
    对于速度慢的解决办法是用机器代替人工，为了在多个系统之间传递消息，发展出了消息队列（MQ）的技术</li>
<li>商业智能（BI）
    为了应对复杂性，通过数据仓库将数据整合到一起，并用专门的工具在数据模型的基础上进行分析</li>
</ul>
<p>但是上述两个方向是正交的：MQ不适合处理复杂性，而BI主要适应于对结构化的历史数据的分析，无法处理“现在”的情况。</p>
<h1>CEP：鱼与熊掌可以兼得</h1>
<p>CEP（Complex Event
Processing）的出现解决了上述两个方面的问题，在实时性和复杂性方面都得到了很好的解决。</p>
<h2>处理数据流</h2>
<p>不管是单独的应用系统，还是数据仓库，都是先将数据存储到数据库/数据仓库，然后再处理或查询。
而CEP与MQ类似的将数据看作是 数据流
。在连续数据的快速移动过程中进行分析处理。
这样的方式不需要很大的数据加载，完全可以在内存中进行，从而能够快速产生结果。</p>
<p><img alt="数据流" src="./assets/images/rule_engine/cep.png"></p>
<h2>处理复杂性</h2>
<p>业务事件可能很复杂，在各种不同的数据流中源源不断产生各种类型的事件。需要对这些业务事件进行复杂的计算，如过滤、关联、聚合等，同时还需要考虑这些也是事件出现的时间序列。
最终才能产生有意义的事件，或触发业务流程。同时，这些计算的规则可能还会经常变化。</p>
<p>这一类的问题通常通过基于规则的推理机（即规则引擎）来实现。</p>
<p><img alt="复杂性" src="./assets/images/rule_engine/complex.png"></p>
<h2>CEP的架构</h2>
<p><img alt="CEP的架构" src="./assets/images/rule_engine/cep_architecture.png"></p>
<p>综上所述，CEP在逻辑上应该包括：</p>
<ul>
<li>事件发生器
    通过应用系统、文件系统、数据库、互联网、人工、以及传感器产生事件</li>
<li>事件处理器 模式的匹配、验证和改进，路由，转换以及编排</li>
<li>
<p>事件消费者
    与事件发生器类似，也可以是应用系统、文件系统、数据库、互联网、人工界面等</p>
</li>
<li>
<p>小结</p>
</li>
</ul>
<p>CEP是一种比较新的企业架构(EA,Enterprise
Architure)组件。CEP将数据看做一种数据流，基于规则引擎对业务过程中持续产生的各种事件进行复杂的处理，能够实现对连续数据的快速分析处理。可以应用在多种业务场景，如风险分析、程序化交易等。</p>
<p>如果说BI实现了商业智能，那么CEP则实现了“持续智能（Continuous
Intelligence）“。</p>
	<h6>Written by <a href="http://holbrook.github.io/author/holbrook.html">Holbrook</a> on 2012-11-06.</h6>
</article>

<hr/>
<div class="row">

	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_weixin">微信</a>
		<a class="jiathis_button_email">邮件</a>
		<a class="jiathis_button_douban">豆瓣</a>
		<a class="jiathis_button_hi">百度空间</a>
		<a class="jiathis_button_xqw">雪球</a>
		<a class="jiathis_button_tsina">新浪微博</a>
		<a class="jiathis_button_ishare">一键分享</a>
		<a href="http://www.jiathis.com/share?uid=2124868" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
		<a class="jiathis_counter_style"></a>
	</div>
	<script type="text/javascript">
	var jiathis_config = {data_track_clickback:'true'};
	</script>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=2124868" charset="utf-8"></script>
	<!-- JiaThis Button END -->


	<div class="small-12 columns">
		<h3>Comments</h3>
		<!-- UY BEGIN -->
		<div id="uyan_frame"></div>
		<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2124868"></script>
		<!-- UY END -->
	</div>

	<!-- UJian Button BEGIN -->
	<div class="ujian-hook"></div>
	<script type="text/javascript">var ujian_config = {num:8,showType:3};</script>
	<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js"></script>
	<a href="http://www.ujian.cc" style="border:0;"><img src="http://img.ujian.cc/pixel.png" alt="友荐云推荐" style="border:0;padding:0;margin:0;" /></a>
	<!-- UJian Button END -->

</div>
						</div>
						<!-- End Main Content -->
						<!-- Sidebar -->
						<aside class="medium-3 hide-for-small-only columns">
							<!-- <div class="panel">
								<h5>Places</h5>
								<ul class="side-nav">
									<li><a href="http://getpelican.com/">Pelican</a></li>
									<li><a href="http://python.org/">Python.org</a></li>
									<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
									<li><a href="#">You can modify those links in your config file</a></li>
								</ul>
							</div> -->

							<div class="panel">
								<h5>Tags</h5>
								<ul class="tag-cloud">
									<li><a href="/tag/cli.html" class="tag-4">CLI</a></li>
									<li><a href="/tag/python.html" class="tag-4">python</a></li>
									<li><a href="/tag/duo-xian-cheng.html" class="tag-4">多线程</a></li>
									<li><a href="/tag/gui-ze-yin-qing.html" class="tag-1">规则引擎</a></li>
									<li><a href="/tag/ling-yu-mo-xing.html" class="tag-4">领域模型</a></li>
									<li><a href="/tag/tu-biao.html" class="tag-4">图表</a></li>
									<li><a href="/tag/pelican.html" class="tag-4">pelican</a></li>
									<li><a href="/tag/ce-shi.html" class="tag-3">测试</a></li>
									<li><a href="/tag/jiao-yi-xi-tong.html" class="tag-1">交易系统</a></li>
									<li><a href="/tag/tong-ji-xue.html" class="tag-1">统计学</a></li>
									<li><a href="/tag/zhi-shi-guan-li.html" class="tag-4">知识管理</a></li>
									<li><a href="/tag/vim.html" class="tag-4">vim</a></li>
									<li><a href="/tag/markdown.html" class="tag-4">markdown</a></li>
									<li><a href="/tag/blog.html" class="tag-3">blog</a></li>
									<li><a href="/tag/cep.html" class="tag-2">CEP</a></li>
									<li><a href="/tag/gui.html" class="tag-1">GUI</a></li>
									<li><a href="/tag/xiao-xi-zhong-jian-jian.html" class="tag-4">消息中间件</a></li>
									<li><a href="/tag/java.html" class="tag-1">java</a></li>
									<li><a href="/tag/nosql.html" class="tag-4">NoSQL</a></li>
									<li><a href="/tag/yun-wei.html" class="tag-1">运维</a></li>
									<li><a href="/tag/osgi.html" class="tag-1">OSGi</a></li>
									<li><a href="/tag/graph.html" class="tag-3">graph</a></li>
									<li><a href="/tag/cluster.html" class="tag-2">cluster</a></li>
									<li><a href="/tag/web.html" class="tag-4">web</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Monthly Archives</h5>
								<ul class="side-nav">
											<li><a href="/2017/02/">2017-02  (1)</a></li>
											<li><a href="/2015/05/">2015-05  (1)</a></li>
											<li><a href="/2014/02/">2014-02  (4)</a></li>
											<li><a href="/2014/01/">2014-01  (9)</a></li>
											<li><a href="/2013/12/">2013-12  (10)</a></li>
											<li><a href="/2013/09/">2013-09  (1)</a></li>
											<li><a href="/2013/08/">2013-08  (2)</a></li>
											<li><a href="/2013/07/">2013-07  (7)</a></li>
											<li><a href="/2013/06/">2013-06  (4)</a></li>
											<li><a href="/2013/05/">2013-05  (6)</a></li>
											<li><a href="/2013/01/">2013-01  (2)</a></li>
											<li><a href="/2012/12/">2012-12  (4)</a></li>
											<li><a href="/2012/11/">2012-11  (3)</a></li>
											<li><a href="/2012/10/">2012-10  (2)</a></li>
											<li><a href="/2012/04/">2012-04  (1)</a></li>
											<li><a href="/2012/03/">2012-03  (1)</a></li>
											<li><a href="/2012/02/">2012-02  (2)</a></li>
											<li><a href="/2010/12/">2010-12  (1)</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Links</h5>
								<ul class="side-nav">
									<li><a href="#">Another social link</a></li>
									<li><a href="#">You can add links in your config file</a></li>
								</ul>
							</div>
						</aside>
						<!-- End Sidebar -->
					</div>

					<!-- Footer -->
					<footer class="row">
						<div class="medium-9 small-12">
							<p class="text-center">Powered by <a href="http://getpelican.com">Pelican</a> and <a href="http://foundation.zurb.com/">Zurb Foundation</a>. Theme by <a href="http://hamaluik.com">Kenton Hamaluik</a>.</p>
						</div>
					</footer>
					<!-- End Footer -->
				</section>
				<a class="exit-off-canvas"></a>
			</div><!--off-canvas inner-->
		</div><!--off-canvas wrap-->

		<script src="http://holbrook.github.io/theme/js/jquery.js"></script>
		<script src="http://holbrook.github.io/theme/js/foundation.min.js"></script>
		<script>
			$(document).foundation();
		</script>
	</body>
</html>