<!doctype html>
<html class="no-js" lang="en">
	<head>
		<meta name="uyan_auth" content="05e9c08001" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>心内求法</title>
		<meta name="description" content="">
		<meta name="author" content="Holbrook">

		<link rel="stylesheet" href="http://holbrook.github.io/theme/css/foundation.css" />
		<link rel="stylesheet" href="http://holbrook.github.io/theme/css/pygment/monokai.css" />
		<link rel="stylesheet" href="http://holbrook.github.io/theme/css/custom.css" />


		<script src="http://holbrook.github.io/theme/js/modernizr.js"></script>

		<!-- Feeds -->
		<link href="http://holbrook.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="心内求法 Atom Feed" />


		<!-- mathjax config similar to math.stackexchange -->
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			jax: ["input/TeX", "output/HTML-CSS"],
			tex2jax: {
				inlineMath: [ ['$', '$'] ],
				displayMath: [ ['$$', '$$']],
				processEscapes: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
			},
			messageStyle: "none",
			"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
		});
		</script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<!-- 百度统计 -->
		<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "https://hm.baidu.com/hm.js?16d951e9b49ded5f2e821a0e61d77797";
		  var s = document.getElementsByTagName("script")[0];
		  s.parentNode.insertBefore(hm, s);
		})();
		</script>
	</head>
	<body>
		<div class="off-canvas-wrap">
			<div class="inner-wrap">
				<!-- mobile top bar to activate nav -->
				<nav class="tab-bar show-for-small">
					<section class="left-small">
						<a class="left-off-canvas-toggle menu-icon" >
							<span class="fa-stack">
                    			<i class="fa fa-circle fa-stack-2x"></i>
                    			<i class="fa fa-bank fa-stack-1x fa-inverse" style="color: #eee"></i>
                			</span>
            			</a>
					</section>

					<section class="middle tab-bar-section">
						<h1 class="title">心内求法</h1>
					</section>
				</nav>

				<!-- mobile side bar nav -->
				<aside class="left-off-canvas-menu">
					<ul class="off-canvas-list">
						<li><a href="http://holbrook.github.io">Home</a></li>
						<li><label>Categories</label></li>
							<li ><a href="http://holbrook.github.io/category/bing-fa-xi-tong.html">并发系统</a></li>
							<li ><a href="http://holbrook.github.io/category/du-shu-bi-ji.html">读书笔记</a></li>
							<li ><a href="http://holbrook.github.io/category/ji-xian-xie-zuo.html">极限写作</a></li>
							<li ><a href="http://holbrook.github.io/category/liang-hua-jiao-yi.html">量化交易</a></li>
							<li class="active"><a href="http://holbrook.github.io/category/ruan-jian-kai-fa.html">软件开发</a></li>
							<li ><a href="http://holbrook.github.io/category/shu-ju-ke-xue.html">数据科学</a></li>
							<li ><a href="http://holbrook.github.io/category/tou-zi-fen-xi.html">投资分析</a></li>

						<li><label>Places</label></li>
							<li><a href="http://getpelican.com/">Pelican</a></li>
							<li><a href="http://python.org/">Python.org</a></li>
							<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
							<li><a href="#">You can modify those links in your config file</a></li>


						<li><label>Monthly Archives</label></li>
									<li><a href="/posts/2017/02/">二月 2017 (1)</a></li>
									<li><a href="/posts/2015/05/">五月 2015 (1)</a></li>
									<li><a href="/posts/2014/02/">二月 2014 (3)</a></li>
									<li><a href="/posts/2014/01/">一月 2014 (2)</a></li>
									<li><a href="/posts/2013/12/">十二月 2013 (7)</a></li>
									<li><a href="/posts/2013/07/">七月 2013 (6)</a></li>
									<li><a href="/posts/2013/06/">六月 2013 (3)</a></li>
									<li><a href="/posts/2013/05/">五月 2013 (4)</a></li>
									<li><a href="/posts/2013/01/">一月 2013 (2)</a></li>
									<li><a href="/posts/2012/12/">十二月 2012 (3)</a></li>
									<li><a href="/posts/2012/11/">十一月 2012 (3)</a></li>
									<li><a href="/posts/2012/10/">十月 2012 (1)</a></li>
									<li><a href="/posts/2012/04/">四月 2012 (1)</a></li>
									<li><a href="/posts/2012/03/">三月 2012 (1)</a></li>
									<li><a href="/posts/2012/02/">二月 2012 (1)</a></li>
									<li><a href="/posts/2010/12/">十二月 2010 (1)</a></li>

						<li><label>Links</label></li>
							<li><a href="#">Another social link</a></li>
							<li><a href="#">You can add links in your config file</a></li>
					</ul>
				</aside>

				<!-- top bar nav -->
				<nav class="top-bar hide-for-small-only" data-topbar>
					<ul class="title-area">
						<li class="name">
							<h1><a href="http://holbrook.github.io/">心内求法</a></h1>
						</li>
					</ul>

					<section class="top-bar-section">
						<ul class="left">
								<li ><a href="http://holbrook.github.io/category/bing-fa-xi-tong.html">并发系统</a></li>
								<li ><a href="http://holbrook.github.io/category/du-shu-bi-ji.html">读书笔记</a></li>
								<li ><a href="http://holbrook.github.io/category/ji-xian-xie-zuo.html">极限写作</a></li>
								<li ><a href="http://holbrook.github.io/category/liang-hua-jiao-yi.html">量化交易</a></li>
								<li class="active"><a href="http://holbrook.github.io/category/ruan-jian-kai-fa.html">软件开发</a></li>
								<li ><a href="http://holbrook.github.io/category/shu-ju-ke-xue.html">数据科学</a></li>
								<li ><a href="http://holbrook.github.io/category/tou-zi-fen-xi.html">投资分析</a></li>
						</ul>
					</section>
				</nav>

				<!-- Main Page Content and Sidebar -->
				<section class="main-section">
					<div class="row">
						<!-- Main Content -->
						<div class="medium-9 small-12 columns" role="content">
<article>
	<h2>搭建一个“现代化”的web开发环境</h2>
	<h1>目标</h1>
<p>将要开展的一个项目，使用Angularjs 和 Flask开发一个web界面，
作为saltstack和其他自行开发的python小工具的前端界面，
实现自己的“运维操作平台”。</p>
<p>为了统一框架、工具和开发方式，在本文中描述了项目的一些约定。
这些约定具有通用性，应该是目前基于python的web开发技术中，
比较”主流“和”先进“的方式，所以也可以作为开发其他应用的参考。</p>
<h1>工具和框架</h1>
<h2>工具</h2>
<ul>
<li>版本管理
    基于<a href="http://gogs.io/">gogs</a> 的私有git</li>
<li>问题管理、版本发布、资料共享
    <a href="http://www.redmine.org/">redmine</a></li>
<li>项目管理
    <a href="http://www.redminebacklogs.net/">redmine的scrum插件</a></li>
<li>
<p>nodejs包管理器
    <a href="https://www.npmjs.com/">npm</a>(node package manager)。</p>
<p>本文中，npm仅作为安装yoeman, bower，grunt等的基础工具。</p>
</li>
<li>
<p>js依赖管理: <a href="http://bower.io/">bower</a>
    npm可以安装js包，但是没有解决依赖的问题。而bower解决了js包的依赖管理。类似maven中的依赖管理功能。</p>
</li>
<li>
<p>前端构建工具: <a href="http://gruntjs.com/">grunt</a>
    js开发中的项目构建工具，类似maven/ant/makefile，
    通过配置文件执行压缩,编译, 单元测试, 代码检查以及打包发布的任务。</p>
</li>
<li>
<p>前端脚手架工具
    <a href="">yoeman</a>。类似maven的archetypes。</p>
</li>
<li>
<p>python开发环境管理
    <a href="http://virtualenv-chinese-docs.readthedocs.org/en/latest/">virtualenv</a></p>
</li>
</ul>
<h2>框架和插件</h2>
<ul>
<li>
<p>样式库 <a href="http://getbootstrap.com/">Bootstrap</a></p>
<ul>
<li><a href="https://github.com/nnnick/Chart.js/">chartjs</a></li>
</ul>
</li>
<li>
<p>前端框架：<a href="https://angularjs.org/">AngularJS</a></p>
</li>
<li>后端框架：<a href="">Flask</a><ul>
<li>Flask-SQLAlchemy</li>
<li>Flask-RESTful</li>
</ul>
</li>
</ul>
<h2>环境准备</h2>
<div class="highlight"><pre><span></span>本文中仅给出MacOS下的安装方法，其他系统可以阅读官方文档或参考资料。
</pre></div>


<div class="highlight"><pre><span></span><span class="c1">#安装npm</span>
brew install npm

<span class="c1">#全局安装工具</span>
npm install -g yo grunt-cli grunt bower generator-angular

<span class="c1">#安装virtualenv</span>
sudo easy_install pip
sudo pip install virtualenv
</pre></div>


<h1>搭建工程</h1>
<h2>创建工程目录</h2>
<div class="highlight"><pre><span></span>mkdir -p PROJ<span class="se">\_</span>ROOT/web <span class="se">\#</span> 前端工程目录 mkdir -p
PROJ<span class="se">\_</span>ROOT/app/APP<span class="se">\_</span>NAME <span class="se">\#</span> 后端工程目录 <span class="se">\#</span>+END
</pre></div>


<h2>创建前端工程</h2>
<div class="highlight"><pre><span></span><span class="nb">cd</span> PROJ<span class="se">\_</span>ROOT/web yo angular <span class="se">\#</span> 一些交互，按照自己的需要选择即可。 <span class="se">\#</span>...
</pre></div>


<h2>配置前端工程</h2>
<ol>
<li>
<p>修改IP地址</p>
<p>将connect -> hostname, 由'localhost' 改为 '0.0.0.0'</p>
</li>
<li>
<p>修改dist目录</p>
<p>将appConfig -> dist 有 'dist' 改为 '../app/APP_NAME/static'</p>
</li>
<li>
<p>virtualenv</p>
</li>
</ol>
<div class="highlight"><pre><span></span><span class="nb">cd</span> PROJ<span class="se">\_</span>ROOT
virtualenv venv
<span class="nb">source</span> venv/bin/activate
pip install flask
pip install sqlalchemy
pip install flask-sqlalchemy
...
pip freeze &gt; app/requirements.txt
</pre></div>


<ol>
<li>构建Flask工程</li>
</ol>
<div class="highlight"><pre><span></span>mkdir -p PROJ<span class="se">\_</span>ROOT/app/APP<span class="se">\_</span>NAME/common
mkdir -p PROJ<span class="se">\_</span>ROOT/app/APP<span class="se">\_</span>NAME/models
mkdir -p PROJ<span class="se">\_</span>ROOT/app/APP<span class="se">\_</span>NAME/static
mkdir -p PROJ<span class="se">\_</span>ROOT/app/APP<span class="se">\_</span>NAME/templates
mkdir -p PROJ<span class="se">\_</span>ROOT/app/APP<span class="se">\_</span>NAME/views

touch PROJ<span class="se">\_</span>ROOT/app/APP<span class="se">\_</span>NAME/common/__init__.py
touch PROJ<span class="se">\_</span>ROOT/app/APP<span class="se">\_</span>NAME/models/__init__.py
touch PROJ<span class="se">\_</span>ROOT/app/APP<span class="se">\_</span>NAME/views/__init__.py
</pre></div>


<ol>
<li>配置git</li>
</ol>
<div class="highlight"><pre><span></span><span class="nb">cd</span> PROJ<span class="se">\_</span>ROOT
mv web/.gitattributes .
rm -f web/.gitignore
cat &gt; .gitignore <span class="s">&lt;&lt; EOF</span>
<span class="s">web/node_modules</span>
<span class="s">web/.tmp</span>
<span class="s">web/.sass-cache</span>
<span class="s">web/bower_components</span>
<span class="s">dist</span>
<span class="s">venv</span>
<span class="s">EOF</span>
</pre></div>


<h1>使用</h1>
<p>以上是工程框架搭建的过程，对于开发人员，不需要要这么麻烦，只要从版本库中获取源代码后进行初始化即可：</p>
<div class="highlight"><pre><span></span>git clone xxxx <span class="nb">cd</span> PROJ_ROOT
virtualenv venv
<span class="nb">source</span> venv/bin/activate
pip install -r app/requirements.txt
<span class="nb">cd</span> web
npm install
bower install
</pre></div>


<h2>启动前端</h2>
<div class="highlight"><pre><span></span><span class="nb">cd</span> PROJ_ROOT/web
grunt serve
</pre></div>


<p>然后通过http://0.0.0.0:9000可以访问前端界面。</p>
<h2>启动后端</h2>
<div class="highlight"><pre><span></span><span class="nb">cd</span> PROJ<span class="se">\_</span>ROOT/app
python run.py
</pre></div>


<div class="highlight"><pre><span></span>然后通过http://127.0.0.1:5000/ 访问后端应用。
</pre></div>


<h1>知识准备</h1>
<div class="highlight"><pre><span></span>在开始开发之前，开发人员最好熟悉以下内容：

- Bootstrap入门: http://v3.bootcss.com/getting-started/
- Angularjs入门教程: http://www.ituring.com.cn/article/13471
- Flask系列教程 :http://www.oschina.net/translate/the-flask-mega-tutorial-part-i-hello-world
- SQLAlchemy教程:
</pre></div>


<h1>参考资料</h1>
<ol>
<li>NPM小结 chyingp http://www.cnblogs.com/chyingp/p/npm.html</li>
<li>bower解决js的依赖管理 | 粉丝日志
    http://blog.fens.me/nodejs-bower-intro/</li>
<li>getting started with Yeoman http://yeoman.io/learning/index.html</li>
<li>Yeoman自动构建js项目 | 粉丝日志
    http://blog.fens.me/nodejs-yeoman-intro/</li>
<li>grunt让Nodejs规范起来 | 粉丝日志
    http://blog.fens.me/nodejs-grunt-intro/</li>
<li>Bootstrap入门 http://v3.bootcss.com/getting-started/</li>
<li>AngularJS入门教程 http://www.ituring.com.cn/article/13471</li>
<li>Flask系列教程
    http://www.oschina.net/translate/the-flask-mega-tutorial-part-i-hello-world</li>
<li>使用 Flask 和 AngularJS 构建博客 - 1
    http://segmentfault.com/a/1190000000654088</li>
<li>使用 Flask 和 AngularJS 构建博客 - 2
    http://segmentfault.com/a/1190000000665636</li>
</ol>
<hr>
<p>references:
- id: fenner2012a
  title: One-click science marketing
    author:
      - family: Fenner
        given: Martin
        container-title: Nature Materials
        volume: 11
        URL: 'http://dx.doi.org/10.1038/nmat3283'
        DOI: 10.1038/nmat3283
        issue: 4
        publisher: Nature Publishing Group
        page: 261-263
        type: article-journal
        issued:
        year: 2012
        month: 3</p>
<hr>
	<h6>Written by <a href="http://holbrook.github.io/author/holbrook.html">Holbrook</a> on 2015-05-04.</h6>
</article>

<hr/>
<div class="row">
	<div class="small-12 columns">
		<h3>Comments</h3>
		<!-- UY BEGIN -->
		<div id="uyan_frame"></div>
		<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2124868"></script>
		<!-- UY END -->
	</div>
</div>
						</div>
						<!-- End Main Content -->
						<!-- Sidebar -->
						<aside class="medium-3 hide-for-small-only columns">
							<!-- <div class="panel">
								<h5>Places</h5>
								<ul class="side-nav">
									<li><a href="http://getpelican.com/">Pelican</a></li>
									<li><a href="http://python.org/">Python.org</a></li>
									<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
									<li><a href="#">You can modify those links in your config file</a></li>
								</ul>
							</div> -->

							<div class="panel">
								<h5>Tags</h5>
								<ul class="tag-cloud">
									<li><a href="/tag/graph.html" class="tag-2">graph</a></li>
									<li><a href="/tag/cli.html" class="tag-4">CLI</a></li>
									<li><a href="/tag/cluster.html" class="tag-1">cluster</a></li>
									<li><a href="/tag/java.html" class="tag-2">Java</a></li>
									<li><a href="/tag/blog.html" class="tag-2">blog</a></li>
									<li><a href="/tag/tong-ji-xue.html" class="tag-4">统计学</a></li>
									<li><a href="/tag/pelican.html" class="tag-4">pelican</a></li>
									<li><a href="/tag/zhi-shi-guan-li.html" class="tag-4">知识管理</a></li>
									<li><a href="/tag/jiao-yi-xi-tong.html" class="tag-1">交易系统</a></li>
									<li><a href="/tag/vim.html" class="tag-4">vim</a></li>
									<li><a href="/tag/nosql.html" class="tag-4">NoSQL</a></li>
									<li><a href="/tag/yun-wei.html" class="tag-0">运维</a></li>
									<li><a href="/tag/xiao-xi-zhong-jian-jian.html" class="tag-4">消息中间件</a></li>
									<li><a href="/tag/gui-ze-yin-qing.html" class="tag-0">规则引擎</a></li>
									<li><a href="/tag/ling-yu-mo-xing.html" class="tag-4">领域模型</a></li>
									<li><a href="/tag/cep.html" class="tag-2">CEP</a></li>
									<li><a href="/tag/markdown.html" class="tag-4">markdown</a></li>
									<li><a href="/tag/web.html" class="tag-4">web</a></li>
									<li><a href="/tag/duo-xian-cheng.html" class="tag-4">多线程</a></li>
									<li><a href="/tag/ce-shi.html" class="tag-4">测试</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Monthly Archives</h5>
								<ul class="side-nav">
											<li><a href="/2017/02/">2017-02  (1)</a></li>
											<li><a href="/2015/05/">2015-05  (1)</a></li>
											<li><a href="/2014/02/">2014-02  (3)</a></li>
											<li><a href="/2014/01/">2014-01  (2)</a></li>
											<li><a href="/2013/12/">2013-12  (7)</a></li>
											<li><a href="/2013/07/">2013-07  (6)</a></li>
											<li><a href="/2013/06/">2013-06  (3)</a></li>
											<li><a href="/2013/05/">2013-05  (4)</a></li>
											<li><a href="/2013/01/">2013-01  (2)</a></li>
											<li><a href="/2012/12/">2012-12  (3)</a></li>
											<li><a href="/2012/11/">2012-11  (3)</a></li>
											<li><a href="/2012/10/">2012-10  (1)</a></li>
											<li><a href="/2012/04/">2012-04  (1)</a></li>
											<li><a href="/2012/03/">2012-03  (1)</a></li>
											<li><a href="/2012/02/">2012-02  (1)</a></li>
											<li><a href="/2010/12/">2010-12  (1)</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Links</h5>
								<ul class="side-nav">
									<li><a href="#">Another social link</a></li>
									<li><a href="#">You can add links in your config file</a></li>
								</ul>
							</div>
						</aside>
						<!-- End Sidebar -->
					</div>

					<!-- Footer -->
					<footer class="row">
						<div class="medium-9 small-12">
							<p class="text-center">Powered by <a href="http://getpelican.com">Pelican</a> and <a href="http://foundation.zurb.com/">Zurb Foundation</a>. Theme by <a href="http://hamaluik.com">Kenton Hamaluik</a>.</p>
						</div>
					</footer>
					<!-- End Footer -->
				</section>
				<a class="exit-off-canvas"></a>
			</div><!--off-canvas inner-->
		</div><!--off-canvas wrap-->

		<script src="http://holbrook.github.io/theme/js/jquery.js"></script>
		<script src="http://holbrook.github.io/theme/js/foundation.min.js"></script>
		<script>
			$(document).foundation();
		</script>
	</body>
</html>